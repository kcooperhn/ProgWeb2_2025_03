<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Registro de Quiniela</title>
</h:head>
<h:body>
    <h:form id="form1">
       <p:megaMenu orientation="horizontal" autoDisplay="false">
          <p:submenu label="Resultados" icon="pi pi-fw pi-users">
             <p:column>
                <p:submenu label="Resultados pasados">
                    <p:menuitem value="Registrar Predicción" action="/prediccion.xhtml"/>
                </p:submenu>
                <p:submenu label="Resultados en vivo">
                   <p:menuitem value="Ver en Vivo"/>
                </p:submenu>
             </p:column>
          </p:submenu>

          <p:submenu label="Partidos" icon="pi pi-fw pi-calendar">
             <p:column>
                <p:submenu label="Nuevos partidos">
                   <p:menuitem value="Registrar nuevo" action="/index.xhtml"/>
                </p:submenu>
                <p:submenu label="Partidos registrados">
                   <p:menuitem value="Partidos siguientes"/>
                   <p:menuitem value="Partidos anteriores"/>
                </p:submenu>
             </p:column>
          </p:submenu>

          <f:facet name="end">
             <div class="ui-input-icon-left mr-2">
                <i class="pi pi-fw pi-search" />
                <p:inputText placeholder="Buscar"/>
             </div>
             <p:button value="Salir" icon="pi pi-fw pi-sign-out" styleClass="ui-button-info" />
          </f:facet>
       </p:megaMenu>
        <p:growl id="growl" showDetail="false"/>

        <p:panel header="Registro de Resultado">
            <p:panelGrid columns="2" layout="grid" styleClass="ui-fluid">
                <p:outputLabel for="partidoPronostico" value="Partido"/>
                <p:selectOneMenu id="partidoPronostico" value="#{PronosticosBean.partido}" converter="partidoConverter">
                    <f:selectItem itemLabel="Seleccione un partido" itemValue="" />
                    <f:selectItems value="#{PronosticosBean.partidosItems}" />
                </p:selectOneMenu>

                <p:outputLabel for="txtgolesrival1" value="Goles del Equipo Local"/>
                <p:inputNumber id="txtgolesrival1" placeholder="Goles Equipo Local" value="#{PronosticosBean.golesLocal}"
                             minValue="0" maxValue="20" decimalPlaces="0"
                             required="true" requiredMessage="Debes de ingresar el marcador del equipo local"/>

                <p:outputLabel for="txtgolesrival2" value="Goles del Equipo Visitante"/>
                <p:inputNumber id="txtgolesrival2" placeholder="Goles Equipo Visitante" value="#{PronosticosBean.golesVisitante}"
                             minValue="0" maxValue="20" decimalPlaces="0"
                             required="true" requiredMessage="Debes de ingresar el marcador del equipo visitante"/>

                <p:outputLabel for="txtusuarioprediccion" value="Usuario actual"/>
                <p:inputText id="txtusuarioprediccion" placeholder="DNI del usuario" value="#{PronosticosBean.usuario}"
                               required="true" requiredMessage="Debes de ingresar el DNI del usuario que realiza la predicción"/>
            </p:panelGrid>

            <p:commandButton value="Gardar mi predicción" styleClass="rounded-button"
                             update="growl,form1" actionListener="#{PronosticosBean.registrarPronostico}"/>
        </p:panel>

        <p:dataTable id="partidosTable" var="pro" value="#{PronosticosBean.obtenerPronosticos()}"
                     style="margin-top: 20px;">
            <f:facet name="header">
                Listado de Pronosticos registrados
            </f:facet>
            <p:column headerText="Usuario">
                <h:outputText value="#{pro.usuario}" />
            </p:column>
            <p:column headerText="Equipo Local">
                <h:outputText value="#{pro.partido.rival1}" />
            </p:column>
            <p:column headerText="Goles Equipo Local">
                <h:outputText value="#{pro.golesLocal}" />
            </p:column>
            <p:column headerText="Equipo Visitante">
                <h:outputText value="#{pro.partido.rival2}" />
            </p:column>
            <p:column headerText="Goles Equipo Visitante">
                <h:outputText value="#{pro.golesVisitante}" />
            </p:column>
            <p:column headerText="Fecha y Hora">
                <h:outputText value="#{pro.partido.fechaHora}"/>
            </p:column>
        </p:dataTable>
    </h:form>
</h:body>
</html>